–û–∫, —Ü–µ –¥–∏–Ω–∞–º—ñ—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ **`pages/albums/[albumId].js`** (Pages Router). –í App Router —Ü–µ –±—É–¥–µ:

* **`src/app/albums/[albumId]/page.js`** (—Å–µ—Ä–≤–µ—Ä–Ω–∏–π —Ñ–∞–π–ª-—Å—Ç–æ—Ä—ñ–Ω–∫–∞)
* –∞ –≤—Å—é –ª–æ–≥—ñ–∫—É/—Ö—É–∫–∏ ‚Äî –≤ **–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É `features`

–ù–∏–∂—á–µ: 1) –∑—ñ–±—Ä–∞–Ω–∏–π –∫–æ–¥, 2) –Ω–æ–≤—ñ —Ñ–∞–π–ª–∏, 3) –≤–∞–∂–ª–∏–≤—ñ –ø—Ä–∞–≤–∫–∏ —Ä–æ—É—Ç–µ—Ä–∞/–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤.

---

## 1) –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–¥ –∑—ñ —Å–∫—Ä—ñ–Ω—ñ–≤ (–æ—Ä–∏–≥—ñ–Ω–∞–ª)

> **OLD:** `pages/albums/[albumId].js`

```jsx
import { useState, useEffect } from 'react'
import { useRouter } from 'next/router'
import { Box, Typography, IconButton, Paper, Tab, Tabs, Button } from '@mui/material'
import { ArrowBack, Description, PictureAsPdf, Print, Add, Layers } from '@mui/icons-material'
import NavigationTree from '@/app/components/shared/NavigationTree'
import AlbumEditForm from '@/app/components/album/AlbumEditForm'
import SchemeReport from '@/app/components/album/SchemeReport'
import SearchComponent from '@/app/components/shared/SearchBar'
import NewSchemeModal from '@/app/components/album/NewSchemeModal'
import { fetchAlbumById } from '@/utils/api'

const AlbumPage = () => {
  const router = useRouter()
  const { albumId, mode } = router.query

  const [album, setAlbum] = useState(null)
  const [activeTab, setActiveTab] = useState(0)
  const [isNewSchemeModalOpen, setIsNewSchemeModalOpen] = useState(false)

  useEffect(() => {
    if (albumId) {
      const loadAlbum = async () => {
        try {
          const data = await fetchAlbumById(albumId)
          setAlbum(data)
        } catch (error) {
          console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–ª—å–±–æ–º—É:', error)
        }
      }

      loadAlbum()
    }
  }, [albumId])

  const handleOpenNewSchemeModal = () => {
    setIsNewSchemeModalOpen(true)
  }

  const handleCloseNewSchemeModal = () => {
    setIsNewSchemeModalOpen(false)
  }

  if (!album) {
    return <Typography variant="h6">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</Typography>
  }

  return (
    <Box display="flex" height="100vh">
      {/* –õ—ñ–≤–∞ –ø–∞–Ω–µ–ª—å */}
      <Box width="300px" p={2} borderRight="1px solid #ddd">
        <Tabs
          value={activeTab}
          onChange={(e, newValue) => setActiveTab(newValue)}
          variant="fullWidth"
        >
          <Tab label="–ù–∞–≤—ñ–≥–∞—Ü—ñ—è" />
          <Tab label="–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∞–ª—å–±–æ–º—É" />
        </Tabs>

        <Box hidden={activeTab !== 0}>
          <NavigationTree albumId={albumId} />
        </Box>
        <Box hidden={activeTab !== 1}>
          <AlbumEditForm albumId={albumId} />
        </Box>
      </Box>

      {/* –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <Box flexGrow={1} p={3}>
        {/* –í–µ—Ä—Ö–Ω—è –ø–∞–Ω–µ–ª—å */}
        <Box display="flex" alignItems="center" justifyContent="space-between" mb={2}>
          {/* –ë–ª–æ–∫ –ø–æ—à—É–∫—É */}
          <SearchComponent />

          {/* –ö–Ω–æ–ø–∫–∏ */}
          <Box display="flex" alignItems="center" gap={1}>
            <IconButton onClick={() => router.push('/albums')} title="–î–æ –∫–∞—Ç–∞–ª–æ–≥—É –∞–ª—å–±–æ–º—ñ–≤">
              <ArrowBack />
            </IconButton>

            <IconButton title="–í–µ—Ä—Å—ñ—ó –∞–ª—å–±–æ–º—É">
              <Layers />
            </IconButton>

            <IconButton title="–î–æ–∫—É–º–µ–Ω—Ç–∏ –∞–ª—å–±–æ–º—É">
              <Description />
            </IconButton>

            <IconButton title="–ï–∫—Å–ø–æ—Ä—Ç –∞–ª—å–±–æ–º—É">
              <PictureAsPdf />
            </IconButton>

            <IconButton title="–î—Ä—É–∫ –∞–ª—å–±–æ–º—É">
              <Print />
            </IconButton>

            <Button
              variant="contained"
              startIcon={<Add />}
              title="–ù–æ–≤–∏–π –∞—Ä–∫—É—à –∞–ª—å–±–æ–º—É —Å—Ö–µ–º"
              onClick={handleOpenNewSchemeModal}
            >
              –ù–æ–≤–∏–π –∞—Ä–∫—É—à
            </Button>
          </Box>
        </Box>

        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <Paper sx={{ p: 2, mb: 2, textAlign: 'center' }}>
          <Typography variant="h5">–°–ø–∏—Å–æ–∫ —Å—Ö–µ–º –∞–ª—å–±–æ–º—É {album.NAME}</Typography>
        </Paper>

        {/* –ë–ª–æ–∫ –∑–≤—ñ—Ç—É */}
        <SchemeReport albumId={albumId} userRole={album.userRole} mode={mode} />

        {/* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ */}
        <NewSchemeModal
          open={isNewSchemeModalOpen}
          onClose={handleCloseNewSchemeModal}
          onSchemeCreated={() => {}}
        />
      </Box>
    </Box>
  )
}

export default AlbumPage
```

---

## 2) –ù–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (App Router)

### ‚úÖ NEW: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π)

**`src/features/albums/ui/AlbumPage.js`**

```jsx
'use client'

import { useEffect, useMemo, useState } from 'react'
import { useParams, useRouter, useSearchParams } from 'next/navigation'
import { Box, Typography, IconButton, Paper, Tab, Tabs, Button } from '@mui/material'
import { ArrowBack, Description, PictureAsPdf, Print, Add, Layers } from '@mui/icons-material'

import NavigationTree from '@/app/components/shared/NavigationTree'
import AlbumEditForm from '@/app/components/album/AlbumEditForm'
import SchemeReport from '@/app/components/album/SchemeReport'
import SearchComponent from '@/app/components/shared/SearchBar'
import NewSchemeModal from '@/app/components/album/NewSchemeModal'

import { fetchAlbumById } from '@/utils/api'

export default function AlbumPage() {
  const router = useRouter()
  const params = useParams()
  const searchParams = useSearchParams()

  const albumId = params?.albumId
  const mode = useMemo(() => searchParams.get('mode'), [searchParams])

  const [album, setAlbum] = useState(null)
  const [activeTab, setActiveTab] = useState(0)
  const [isNewSchemeModalOpen, setIsNewSchemeModalOpen] = useState(false)

  useEffect(() => {
    if (!albumId) return

    const loadAlbum = async () => {
      try {
        const data = await fetchAlbumById(albumId)
        setAlbum(data)
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–ª—å–±–æ–º—É:', error)
      }
    }

    loadAlbum()
  }, [albumId])

  const handleOpenNewSchemeModal = () => setIsNewSchemeModalOpen(true)
  const handleCloseNewSchemeModal = () => setIsNewSchemeModalOpen(false)

  if (!album) {
    return <Typography variant="h6">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</Typography>
  }

  return (
    <Box display="flex" height="100vh">
      {/* –õ—ñ–≤–∞ –ø–∞–Ω–µ–ª—å */}
      <Box width="300px" p={2} borderRight="1px solid #ddd">
        <Tabs
          value={activeTab}
          onChange={(e, newValue) => setActiveTab(newValue)}
          variant="fullWidth"
        >
          <Tab label="–ù–∞–≤—ñ–≥–∞—Ü—ñ—è" />
          <Tab label="–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∞–ª—å–±–æ–º—É" />
        </Tabs>

        <Box hidden={activeTab !== 0}>
          <NavigationTree albumId={albumId} />
        </Box>

        <Box hidden={activeTab !== 1}>
          <AlbumEditForm albumId={albumId} />
        </Box>
      </Box>

      {/* –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <Box flexGrow={1} p={3}>
        {/* –í–µ—Ä—Ö–Ω—è –ø–∞–Ω–µ–ª—å */}
        <Box display="flex" alignItems="center" justifyContent="space-between" mb={2}>
          <SearchComponent />

          <Box display="flex" alignItems="center" gap={1}>
            <IconButton onClick={() => router.push('/albums')} title="–î–æ –∫–∞—Ç–∞–ª–æ–≥—É –∞–ª—å–±–æ–º—ñ–≤">
              <ArrowBack />
            </IconButton>

            <IconButton title="–í–µ—Ä—Å—ñ—ó –∞–ª—å–±–æ–º—É">
              <Layers />
            </IconButton>

            <IconButton title="–î–æ–∫—É–º–µ–Ω—Ç–∏ –∞–ª—å–±–æ–º—É">
              <Description />
            </IconButton>

            <IconButton title="–ï–∫—Å–ø–æ—Ä—Ç –∞–ª—å–±–æ–º—É">
              <PictureAsPdf />
            </IconButton>

            <IconButton title="–î—Ä—É–∫ –∞–ª—å–±–æ–º—É">
              <Print />
            </IconButton>

            <Button
              variant="contained"
              startIcon={<Add />}
              title="–ù–æ–≤–∏–π –∞—Ä–∫—É—à –∞–ª—å–±–æ–º—É —Å—Ö–µ–º"
              onClick={handleOpenNewSchemeModal}
            >
              –ù–æ–≤–∏–π –∞—Ä–∫—É—à
            </Button>
          </Box>
        </Box>

        <Paper sx={{ p: 2, mb: 2, textAlign: 'center' }}>
          <Typography variant="h5">–°–ø–∏—Å–æ–∫ —Å—Ö–µ–º –∞–ª—å–±–æ–º—É {album.NAME}</Typography>
        </Paper>

        <SchemeReport albumId={albumId} userRole={album.userRole} mode={mode} />

        <NewSchemeModal
          open={isNewSchemeModalOpen}
          onClose={handleCloseNewSchemeModal}
          onSchemeCreated={() => {
            // —è–∫—â–æ –∑–∞—Ö–æ—á–µ—à ‚Äî —Ç—É—Ç –º–æ–∂–Ω–∞ —Ç—Ä–∏–≥–µ—Ä–Ω—É—Ç–∏ —Ä–µ—Ñ—Ä–µ—à —Å–ø–∏—Å–∫—É —Å—Ö–µ–º
          }}
        />
      </Box>
    </Box>
  )
}
```

### ‚úÖ NEW: —Å—Ç–æ—Ä—ñ–Ω–∫–∞ App Router

**`src/app/albums/[albumId]/page.js`**

```jsx
import AlbumPage from '@/features/albums/ui/AlbumPage'

export default function Page() {
  return <AlbumPage />
}
```

---

## 3) –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó

* `next/router` ‚ûú –≤ App Router –∑–∞–º—ñ–Ω—é—î–º–æ –Ω–∞:

  * `useParams()` –¥–ª—è `albumId`
  * `useSearchParams()` –¥–ª—è `mode`
  * `useRouter()` (–∑ `next/navigation`) –¥–ª—è `push()`
* –î–æ–¥–∞—î–º–æ `'use client'` —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AlbumPage`, –±–æ —Ö—É–∫–∏.

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –Ω–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –º–æ–∂–µ–º–æ –≤–∏–Ω–µ—Å—Ç–∏ –ª—ñ–≤—É –ø–∞–Ω–µ–ª—å (Tabs+NavigationTree+AlbumEditForm) –≤ –æ–∫—Ä–µ–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `features/albums/ui/AlbumSidePanel.js`, —â–æ–± —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –±—É–ª–∞ —á–∏—Å—Ç—ñ—à–∞.

–ö–∏–¥–∞–π –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ñ–∞–π–ª/—Å–∫—Ä—ñ–Ω–∏ üëá
