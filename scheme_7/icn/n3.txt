–ß—É–¥–æ–≤–æ üëç
–î–æ–¥–∞—î–º–æ **anchor-—Ç–æ—á–∫—É –¥–ª—è –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤** **–≤ —Å–ø—ñ–ª—å–Ω–æ–º—É –≤—É–∑–ª—ñ J**, –∞–∫—É—Ä–∞—Ç–Ω–æ —ñ —Ç–∞–∫, —â–æ–± –≤–æ–Ω–∞:

* –Ω–µ –∑–∞–≤–∞–∂–∞–ª–∞ –∫–ª—ñ–∫–∞–º –ø–æ —Ñ—ñ–≥—É—Ä—ñ
* –º–æ–≥–ª–∞ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞—Ç–∏—Å—å / –ª–æ–≤–∏—Ç–∏ hover
* –≤—ñ–¥–¥–∞–≤–∞–ª–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤

–ù–∏–∂—á–µ ‚Äî **–æ–Ω–æ–≤–ª–µ–Ω–∏–π `react-konva` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –∑ anchor.

---

## ‚úÖ CircleLineTwoTriangles + Connector Anchor

```jsx
"use client";

import React from "react";
import { Group, Circle, Line } from "react-konva";

/**
 * CircleLineTwoTriangles
 * + Anchor point —É –≤—É–∑–ª—ñ J –¥–ª—è –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤
 *
 * Props (–¥–æ–¥–∞—Ç–∫–æ–≤—ñ):
 *  showAnchors      ‚Äî –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ anchor (default true)
 *  onAnchorClick    ‚Äî (info) => void
 *  onAnchorHover    ‚Äî (info | null) => void
 */
export default function CircleLineTwoTriangles({
  x = 0,
  y = 0,
  scale = 1,
  stroke = "black",
  strokeWidth = 8,
  lineCap = "round",
  lineJoin = "round",

  showAnchors = true,
  onAnchorClick,
  onAnchorHover,
}) {
  // ===== shared junction (anchor point) =====
  const JX = 110;
  const JY = 70;
  const ANCHOR_R = Math.max(4, strokeWidth * 0.6);

  return (
    <Group x={x} y={y} scaleX={scale} scaleY={scale}>
      {/* ===== geometry ===== */}

      {/* left circle */}
      <Circle
        x={35}
        y={40}
        radius={16}
        stroke={stroke}
        strokeWidth={strokeWidth}
      />

      {/* elbow line */}
      <Line
        points={[51, 40, 110, 40, JX, JY]}
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineCap={lineCap}
        lineJoin={lineJoin}
      />

      {/* right triangle (left vertex == J) */}
      <Line
        points={[JX, JY, 190, 40, 190, 100]}
        closed
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineCap={lineCap}
        lineJoin={lineJoin}
      />

      {/* bottom triangle (top vertex == J) */}
      <Line
        points={[JX, JY, 85, 140, 135, 140]}
        closed
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineCap={lineCap}
        lineJoin={lineJoin}
      />

      {/* ===== anchor for connectors ===== */}
      {showAnchors && (
        <Circle
          x={JX}
          y={JY}
          radius={ANCHOR_R}
          fill="#fff"
          stroke={stroke}
          strokeWidth={2}
          listening
          onMouseEnter={() => {
            document.body.style.cursor = "crosshair";
            onAnchorHover?.({
              id: "junction",
              x: JX,
              y: JY,
            });
          }}
          onMouseLeave={() => {
            document.body.style.cursor = "default";
            onAnchorHover?.(null);
          }}
          onMouseDown={(e) => e.cancelBubble = true}
          onClick={(e) => {
            e.cancelBubble = true;
            onAnchorClick?.({
              id: "junction",
              x: JX,
              y: JY,
            });
          }}
        />
      )}
    </Group>
  );
}
```

---

## üîå –Ø–∫ —Ü–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ —Ç–≤–æ—î–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ

```jsx
<CircleLineTwoTriangles
  x={200}
  y={150}
  scale={1}
  onAnchorClick={(anchor) => {
    // —Ç—É—Ç —Å—Ç–∞—Ä—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω–µ–∫—Ç–æ—Ä–∞
    startConnector({
      elementId: el.id,
      anchorId: anchor.id,
      x: anchor.x,
      y: anchor.y,
    });
  }}
/>
```

---

## üß† –ß–æ–º—É —Ü–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É

* anchor **–∂–∏–≤–µ –≤ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö –µ–ª–µ–º–µ–Ω—Ç–∞**
* –º–∞—Å—à—Ç–∞–± (`scale`) –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
* `cancelBubble` –Ω–µ –¥–∞—î –ª–∞–º–∞—Ç–∏ selection
* –≥–æ—Ç–æ–≤–æ –¥–ª—è:

  * routing –ª—ñ–Ω—ñ–π
  * snap
  * hover-–ø—ñ–¥—Å–≤—ñ—Ç–∫–∏

---

## üîú –ú–æ–∂–µ–º–æ –∑—Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ

1. üîπ –∫—ñ–ª—å–∫–∞ anchor-—ñ–≤ (–ª—ñ–≤–∞ –ª—ñ–Ω—ñ—è / –ø—Ä–∞–≤–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫ / –Ω–∏–∂–Ω—ñ–π)
2. üîπ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π `getAnchorPoints()` –¥–ª—è –≤—Å—ñ—Ö —Å–∏–º–≤–æ–ª—ñ–≤
3. üîπ –º–∞–≥–Ω—ñ—Ç–Ω—É –ø—ñ–¥—Å–≤—ñ—Ç–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –∫–æ–Ω–µ–∫—Ç–æ—Ä–∞
4. üîπ —Ç–∏–ø–∏ anchor-—ñ–≤ (`in / out / bidirectional`)

–°–∫–∞–∂–∏, —è–∫–∏–π –ø—É–Ω–∫—Ç –±–µ—Ä–µ–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–º ‚Äî —Ç–∏ –∑–∞—Ä–∞–∑ –±—É–¥—É—î—à **–¥—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞** üí™
