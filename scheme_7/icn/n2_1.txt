–ß—ñ—Ç–∫–æ üëç
–î–æ–¥–∞—î–º–æ **anchor-—Ç–æ—á–∫—É —Å–∞–º–µ –∑–≤–µ—Ä—Ö—É –ª—ñ–Ω—ñ—ó** ‚Äî –ª–æ–≥—ñ—á–Ω–æ **–ø–æ —Ü–µ–Ω—Ç—Ä—É ‚Äú–∫–æ–≤–ø–∞—á–∫–∞‚Äù**, –±–æ —Ü–µ:

* –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ
* —Å—Ç–∞–±—ñ–ª—å–Ω–æ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±—ñ
* —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —è–∫ ‚Äú–≤–∏—Ö—ñ–¥ —É–≥–æ—Ä—É‚Äù

–ù–∏–∂—á–µ ‚Äî **–æ–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –∑ **top-anchor** (—ñ –≥–æ—Ç–æ–≤–∏–π —Ö—É–∫ –¥–ª—è –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤).

---

## ‚úÖ TwoTrianglesZigzag + TOP connector anchor

```jsx
"use client";

import React from "react";
import { Group, Line, Path, Rect, Circle } from "react-konva";

/**
 * TwoTrianglesZigzag (react-konva)
 * + Anchor –∑–≤–µ—Ä—Ö—É –ª—ñ–Ω—ñ—ó (–ø–æ —Ü–µ–Ω—Ç—Ä—É –∫–æ–≤–ø–∞—á–∫–∞)
 *
 * Anchor id: "top"
 */
export default function TwoTrianglesZigzag({
  x = 0,
  y = 0,
  scale = 1,
  stroke = "black",
  strokeWidth = 10,

  showAnchors = true,
  onAnchorClick,
  onAnchorHover,
}) {
  // ===== geometry constants =====
  const CENTER_X = 100;
  const CENTER_Y = 75;

  // top cap
  const CAP_X = 90;
  const CAP_Y = 0;
  const CAP_W = 20;
  const CAP_H = 14;

  // anchor (top of zigzag)
  const TOP_ANCHOR_X = CAP_X + CAP_W / 2; // 100
  const TOP_ANCHOR_Y = CAP_Y;             // 0
  const ANCHOR_R = Math.max(4, strokeWidth * 0.6);

  return (
    <Group x={x} y={y} scaleX={scale} scaleY={scale}>
      {/* Left triangle */}
      <Line
        points={[30, 40, 30, 110, CENTER_X, CENTER_Y]}
        closed
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineJoin="miter"
        lineCap="square"
      />

      {/* Right triangle */}
      <Line
        points={[170, 40, 170, 110, CENTER_X, CENTER_Y]}
        closed
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineJoin="miter"
        lineCap="square"
      />

      {/* Zigzag line */}
      <Path
        data="M100 75 L100 60 L90 52 L110 44 L90 36 L110 28 L100 20 L100 12"
        stroke={stroke}
        strokeWidth={strokeWidth}
        lineJoin="miter"
        lineCap="square"
        fillEnabled={false}
      />

      {/* Top cap */}
      <Rect x={CAP_X} y={CAP_Y} width={CAP_W} height={CAP_H} fill={stroke} />

      {/* ===== TOP anchor for connectors ===== */}
      {showAnchors && (
        <Circle
          x={TOP_ANCHOR_X}
          y={TOP_ANCHOR_Y}
          radius={ANCHOR_R}
          fill="#fff"
          stroke={stroke}
          strokeWidth={2}
          listening
          onMouseEnter={() => {
            document.body.style.cursor = "crosshair";
            onAnchorHover?.({
              id: "top",
              x: TOP_ANCHOR_X,
              y: TOP_ANCHOR_Y,
            });
          }}
          onMouseLeave={() => {
            document.body.style.cursor = "default";
            onAnchorHover?.(null);
          }}
          onMouseDown={(e) => (e.cancelBubble = true)}
          onClick={(e) => {
            e.cancelBubble = true;
            onAnchorClick?.({
              id: "top",
              x: TOP_ANCHOR_X,
              y: TOP_ANCHOR_Y,
            });
          }}
        />
      )}
    </Group>
  );
}
```

---

## üß† –Ø–∫ —Ü–µ —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –≤ —Ç–≤–æ—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤

```js
onAnchorClick={({ id, x, y }) => {
  startConnector({
    elementId: el.id,
    anchorId: id, // "top"
    x,
    y,
  });
}}
```

---

## üîú –ù–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –∫—Ä–æ–∫

–¢–∏ –≤–∂–µ –º–∞–π–∂–µ –Ω–∞ —Ñ—ñ–Ω—ñ—à—ñ –∑ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é üëá
–†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–∞–ª—ñ:

1. üîπ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑—É–≤–∞—Ç–∏ `getAnchorPoints(el)` –¥–ª—è **–≤—Å—ñ—Ö —Å–∏–º–≤–æ–ª—ñ–≤**
2. üîπ —Ç–∏–ø–∏ anchor-—ñ–≤ (`in | out | both`)
3. üîπ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è ‚Äú–¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö‚Äù anchor-—ñ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—ñ –ª—ñ–Ω—ñ—ó

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –Ω–∞—Å—Ç—É–ø–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –∑—Ä–æ–±–∏–º–æ **—î–¥–∏–Ω–∏–π AnchorLayer** –¥–ª—è –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (—è–∫ —É draw.io / Visio).
