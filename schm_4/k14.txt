–§–∞–π–ª –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π —ñ –ø—Ä–æ—Å—Ç–∏–π üëç –ê–ª–µ —â–æ–± –≤—ñ–Ω —Ä–µ–∞–ª—å–Ω–æ –±—É–≤ ‚Äú–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–º‚Äù (–ø—ñ–¥ —Ä—ñ–∑–Ω—ñ `kind`) —ñ –Ω–µ —Ç—è–≥–Ω—É–≤ –ª–æ–≥—ñ–∫—É –Ω–∞–≤–µ—Ä—Ö, —è —Ä–∞–¥–∂—É –∑—Ä–æ–±–∏—Ç–∏ 2 –º–∞–ª–µ–Ω—å–∫—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

1. **–ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ `target` –≤ –º–µ–Ω—é**, —â–æ–± –≤–æ–Ω–æ –º–æ–≥–ª–æ:

* –ø–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–µ–∫—Å—Ç (‚Äú–í–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–≥—É—Ä—É‚Äù / ‚Äú–í–∏–¥–∞–ª–∏—Ç–∏ –∑–≤‚Äô—è–∑–æ–∫‚Äù / ‚Äú–í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ—á–∫—É‚Äù)
* –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `onDelete(target)` (–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `onDelete()`)

2. (–æ–ø—Ü—ñ–π–Ω–æ) **–¥–æ–¥–∞—Ç–∏ –ø—É–Ω–∫—Ç ‚Äú–°–∫–∞—Å—É–≤–∞—Ç–∏‚Äù** –∞–±–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ª–∏—à–∏—Ç–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è –∫–ª—ñ–∫–æ–º –ø–æ–∑–∞ –º–µ–Ω—é.

–ù–∏–∂—á–µ ‚Äî –≥–æ—Ç–æ–≤–∞ –æ–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è.

---

## ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–∏–π `GraphContextMenuMui.js` (–ø—ñ–¥ `kind`)

```jsx
import * as React from "react";
import Menu from "@mui/material/Menu";
import MenuItem from "@mui/material/MenuItem";
import ListItemIcon from "@mui/material/ListItemIcon";
import DeleteIcon from "@mui/icons-material/Delete";

function getDeleteLabel(target) {
  if (!target?.kind) return "–í–∏–¥–∞–ª–∏—Ç–∏";

  switch (target.kind) {
    case "node":
      return "–í–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–≥—É—Ä—É";
    case "connection":
      return "–í–∏–¥–∞–ª–∏—Ç–∏ –∑–≤‚Äô—è–∑–æ–∫";
    case "anchor":
      return "–í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ—á–∫—É";
    default:
      return "–í–∏–¥–∞–ª–∏—Ç–∏";
  }
}

export default function GraphContextMenuMui({
  anchorPosition,
  open,
  onClose,
  onDelete,
  target, // ‚úÖ –¥–æ–¥–∞–ª–∏
}) {
  const label = getDeleteLabel(target);

  return (
    <Menu
      open={open}
      onClose={onClose}
      anchorReference="anchorPosition"
      anchorPosition={anchorPosition ?? undefined}
      disableEnforceFocus
      disableRestoreFocus
    >
      <MenuItem
        onClick={() => {
          onDelete?.(target); // ‚úÖ –ø–µ—Ä–µ–¥–∞—î–º–æ target
          onClose?.();
        }}
        disabled={!target}
      >
        <ListItemIcon>
          <DeleteIcon fontSize="small" />
        </ListItemIcon>
        {label}
      </MenuItem>
    </Menu>
  );
}
```

---

## ‚úÖ –Ø–∫ —Ç–µ–ø–µ—Ä –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ–Ω—é –∑ Editor (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ)

–£ —Ç–≤–æ—î–º—É `EditorContextMenu` / `DiagramEditorPage` —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ `target`:

```jsx
<GraphContextMenuMui
  open={menuState.open}
  anchorPosition={menuState.anchorPosition}
  target={menuState.target}
  onClose={closeMenu}
  onDelete={(target) => {
    if (!target) return;
    S.deleteByTarget(target);
  }}
/>
```

–Ü –≤—Å–µ ‚Äî –º–µ–Ω—é —Å–∞–º–µ –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É –Ω–∞–∑–≤—É.

---

## –î–µ —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ `target`

* –¥–ª—è —Ñ—ñ–≥—É—Ä–∏: `{ kind:"node", id: el.id, shape: el.type }`
* –¥–ª—è –ª—ñ–Ω—ñ—ó: `{ kind:"connection", id: conn.id }`
* –¥–ª—è —Å–∏–Ω—å–æ–≥–æ —è–∫–æ—Ä—è (—è–∫—â–æ –∑–∞—Ö–æ—á–µ—à –≤–∏–¥–∞–ª—è—Ç–∏): `{ kind:"anchor", anchorKind:"lineAnchor", id: a.id, connectionId: conn.id }`

---

–Ø–∫—â–æ —Ö–æ—á–µ—à –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ª–æ–≥—ñ—á–Ω–∏–π –∫—Ä–æ–∫: —è –º–æ–∂—É –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ **–¥–æ–¥–∞—Ç–∏ –ø—É–Ω–∫—Ç ‚Äú–í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ—á–∫—É –ø—Ä–∏–≤‚Äô—è–∑–∫–∏‚Äù** (anchor) —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ `target.kind==="anchor"`, —ñ —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `deleteAnchorById` –≤ `useDiagramState`.
