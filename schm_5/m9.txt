–ß—É–¥–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è üëç
**–ü—ñ–¥–ø–∏—Å (Text / Label)** ‚Äî —Ü–µ *–∫–ª—é—á–æ–≤–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç* –¥–ª—è —Å—Ö–µ–º, —Ç–æ–º—É –ø–æ–∫–∞–∂—É **–ø—Ä–∞–≤–∏–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `Text`.

–ù–∏–∂—á–µ ‚Äî **–≥–æ—Ç–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è**, —è–∫–µ –¥–æ–±—Ä–µ –ª—è–≥–∞—î —É —Ç–≤–æ—é –ø–æ—Ç–æ—á–Ω—É –∫–æ–Ω—Ü–µ–ø—Ü—ñ—é **GraphLibrary + react-konva**.

---

## 1Ô∏è‚É£ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç–∞ ‚Äú–ü—ñ–¥–ø–∏—Å‚Äù

### –ü—ñ–¥–ø–∏—Å ‚Äî —Ü–µ:

* **–ù–ï –æ–∫—Ä–µ–º–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ canvas**
* **—á–∞—Å—Ç–∏–Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞**, —è–∫–∞:

  * –º–æ–∂–µ **–≤–º–∏–∫–∞—Ç–∏—Å—å / –≤–∏–º–∏–∫–∞—Ç–∏—Å—å**
  * –º–∞—î **–ø–æ–∑–∏—Ü—ñ—é –≤—ñ–¥–Ω–æ—Å–Ω–æ –µ–ª–µ–º–µ–Ω—Ç–∞**
  * –º–∞—î **–ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90¬∞ / -90¬∞**
  * –º–∞—î **–≤–ª–∞—Å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å—Ç–∏–ª—é**

---

## 2Ô∏è‚É£ –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç–∞ (–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ)

```js
label: {
  text: "–ù–∞–∑–≤–∞ –µ–ª–µ–º–µ–Ω—Ç–∞",
  visible: true,
  position: "top", // top | bottom | left | right
  fontSize: 14,
  fontWeight: "regular", // light | regular | medium | bold
  color: "#000",
  offset: 6, // –≤—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ —Ñ—ñ–≥—É—Ä–∏
}
```

‚û°Ô∏è **label ‚Äî —á–∞—Å—Ç–∏–Ω–∞ –±—É–¥—å-—è–∫–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞** (rect, circle, symbol‚Ä¶)

---

## 3Ô∏è‚É£ –®—Ä–∏—Ñ—Ç (–≤—É–∑—å–∫–∏–π, –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π)

### –†–µ–∫–æ–º–µ–Ω–¥—É—é:

* **Inter**
* **Roboto Condensed**
* **IBM Plex Sans Condensed**

#### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (Next.js):

```html
<link
  href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap"
  rel="stylesheet"
/>
```

---

## 4Ô∏è‚É£ –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LabelText`

üìÅ `app/diagram/components/LabelText.js`

```jsx
"use client";
import React from "react";
import { Text } from "react-konva";

const FONT_WEIGHT_MAP = {
  light: 300,
  regular: 400,
  medium: 500,
  bold: 700,
};

export default function LabelText({
  text,
  position,
  elementWidth,
  elementHeight,
  offset = 6,
  fontSize = 14,
  fontWeight = "regular",
  color = "#000",
}) {
  let x = 0;
  let y = 0;
  let rotation = 0;

  switch (position) {
    case "top":
      x = elementWidth / 2;
      y = -offset;
      break;

    case "bottom":
      x = elementWidth / 2;
      y = elementHeight + offset;
      break;

    case "left":
      x = -offset;
      y = elementHeight / 2;
      rotation = -90;
      break;

    case "right":
      x = elementWidth + offset;
      y = elementHeight / 2;
      rotation = 90;
      break;
  }

  return (
    <Text
      text={text}
      x={x}
      y={y}
      offsetX={position === "top" || position === "bottom" ? 0 : 0}
      offsetY={0}
      rotation={rotation}
      fontSize={fontSize}
      fontFamily="Inter"
      fontStyle={fontWeight === "bold" ? "bold" : "normal"}
      fill={color}
      align="center"
      verticalAlign="middle"
      listening={false} // ‚ùó –Ω–µ –∑–∞–≤–∞–∂–∞—î –≤–∏–¥—ñ–ª–µ–Ω–Ω—é –µ–ª–µ–º–µ–Ω—Ç–∞
    />
  );
}
```

‚úîÔ∏è **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π —Ç–µ–∫—Å—Ç ‚Äî —á–µ—Ä–µ–∑ `rotation`, –∞ –Ω–µ —Å–∏–º–≤–æ–ª–∞–º–∏**
‚úîÔ∏è –ü—Ä–∞—Ü—é—î –∑ zoom / scale
‚úîÔ∏è –ù–µ –ª–∞–º–∞—î selection

---

## 5Ô∏è‚É£ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –µ–ª–µ–º–µ–Ω—Ç—ñ (Rect / Circle)

### –ü—Ä–∏–∫–ª–∞–¥: `RectElement`

```jsx
import React from "react";
import { Group, Rect } from "react-konva";
import LabelText from "./LabelText";

const RectElement = ({ el }) => {
  return (
    <Group x={el.x} y={el.y} draggable>
      <Rect
        width={el.width}
        height={el.height}
        fill={el.fill}
        stroke={el.stroke}
        strokeWidth={el.strokeWidth}
      />

      {el.label?.visible && (
        <LabelText
          text={el.label.text}
          position={el.label.position}
          elementWidth={el.width}
          elementHeight={el.height}
          fontSize={el.label.fontSize}
          fontWeight={el.label.fontWeight}
          color={el.label.color}
        />
      )}
    </Group>
  );
};

export default RectElement;
```

---

## 6Ô∏è‚É£ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –º–µ–Ω—é ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥–ø–∏—Å—É

### –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä:

* ‚úèÔ∏è –ù–∞–∑–≤–∞ (input)
* ‚òë –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å
* üìç Position (top / bottom / left / right)
* üî† Font size
* üî§ Weight (light / regular / medium / bold)

### –î–∞–Ω—ñ, —è–∫—ñ –º—ñ–Ω—è—î –º–µ–Ω—é:

```js
updateElement(id, {
  label: {
    ...old.label,
    text,
    visible,
    position,
    fontSize,
    fontWeight,
  }
});
```

---

## 7Ô∏è‚É£ –ß–æ–º—É —Ü–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

‚úÖ –ü—ñ–¥–ø–∏—Å ‚Äî **—á–∞—Å—Ç–∏–Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞**, –∞ –Ω–µ –æ–∫—Ä–µ–º–∏–π –æ–± º—î–∫—Ç
‚úÖ –ù–µ –∑–∞–≤–∞–∂–∞—î drag / select
‚úÖ –ü—Ä–∞—Ü—é—î –∑ scale / zoom
‚úÖ –õ–µ–≥–∫–æ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –≤ –ë–î
‚úÖ –ì–æ—Ç–æ–≤–æ –¥–ª—è:

* —à–∞–±–ª–æ–Ω—ñ–≤
* —Å—Ç–∏–ª—ñ–≤
* –µ–∫—Å–ø–æ—Ä—Ç—É (PDF / SVG)

---

## 8Ô∏è‚É£ –î–∞–ª—ñ (–ª–æ–≥—ñ—á–Ω—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏)

1. üîó –ü—ñ–¥–ø–∏—Å–∏ –¥–ª—è **–ª—ñ–Ω—ñ–π / –∫–æ–Ω–µ–∫—Ç–æ—Ä—ñ–≤**
2. üìê Auto-offset –ø—Ä–∏ –∑–º—ñ–Ω—ñ –º–∞—Å—à—Ç–∞–±—É
3. üé® –°—Ç–∏–ª—ñ –ø—ñ–¥–ø–∏—Å—ñ–≤ (theme)
4. üß© Drag label (advanced)

---

–Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî **–Ω–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º** –º–æ–∂—É:

* —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —Ü–µ —É **—Ç–≤–æ—é GraphLibrary**
* –ø–æ–∫–∞–∑–∞—Ç–∏ **context menu UI**
* –∑—Ä–æ–±–∏—Ç–∏ **–ø—ñ–¥–ø–∏—Å –¥–ª—è —Å—Ç—Ä—ñ–ª–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥—É**

–ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ üëâ *‚Äú–π–¥–µ–º–æ –¥–∞–ª—ñ‚Äù* üöÄ
